version: 1
frontend:
  phases:
    preBuild:
      commands:
        - nvm install 24.3.0
        - nvm use 24.3.0
        - npm ci
    build:
      commands:
        - export SERVER_URL=$SERVER_URL
        - echo "window.SERVER_URL='${SERVER_URL}';" > public/env.js
        - npm run build:production
  artifacts:
    baseDirectory: dist/angular-websocket-app/browser
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**

